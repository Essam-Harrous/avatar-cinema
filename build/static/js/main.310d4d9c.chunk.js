(this["webpackJsonpavatar-cinema"]=this["webpackJsonpavatar-cinema"]||[]).push([[0],{144:function(e,t){},146:function(e,t){},165:function(e,t,a){},167:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(89),i=a.n(l),o=a(33),s=a(9),c=a(10),m=a(12),u=a(11),d=a(13),p=(a(39),a(16)),h=a(31),g=a(14),v=a.n(g),E=a(168),b=a(169),f=a(34),y={maxWitdh:"100%",width:"100%",height:"879px",maxHeight:"100%"},x={height:"100%",width:"100%"},N=function(){return r.a.createElement(f.a,null,r.a.createElement(f.a.Item,null,r.a.createElement("div",{style:y},r.a.createElement("img",{style:x,className:"",src:"https://www.hdwallpapers.in/download/jason_momoa_in_see_season_1_4k-3840x2160.jpg",alt:"First slide"}),r.a.createElement(f.a.Caption,null))),r.a.createElement(f.a.Item,null,r.a.createElement("div",{style:y},r.a.createElement("img",{style:x,className:"",src:"https://www.hdwallpapers.in/download/underwater_2020_movie_4k-3840x2160.jpg",alt:"Third slide"}),r.a.createElement(f.a.Caption,null))),r.a.createElement(f.a.Item,null,r.a.createElement("div",{style:y},r.a.createElement("img",{style:x,className:"",src:"https://www.hdwallpapers.in/download/joker_joaquin_phoenix_2019_4k_8k-7680x4320.jpg",alt:"Third slide"}),r.a.createElement(f.a.Caption,null))))},k=a(25),w=a(170),S=a(171),C=a(172),D=a(173),j=a(174),O=a(175),I=a(17),U=a(18),L={width:"1200px",height:"563px",backgroundColor:"rgb(24, 24, 31)",color:"white"},T=function(e){var t=e.isFavorite,a=e.changeFavoriteState,l=e.user,i=e.movie,o=e.index,s=Object(n.useState)(t(i._id)),c=Object(k.a)(s,2),m=c[0],u=c[1];console.log(m);return r.a.createElement("div",{className:"m-3 w-50"},console.log(i),r.a.createElement(E.a,null,r.a.createElement(b.a,null,r.a.createElement(w.a,{className:"my-3",style:L},r.a.createElement(E.a,null,r.a.createElement(b.a,{md:"4"},r.a.createElement(S.a,{src:i.Poster})),r.a.createElement(b.a,{md:"8"},r.a.createElement(C.a,{className:"cardBody"},r.a.createElement(D.a,{className:"title"},i.Title," ",r.a.createElement("span",{className:"imdb"}," ... ",i.imdbRating," ")),r.a.createElement(j.a,{className:"sub"}," ",r.a.createElement("span",{className:"spans"}," Plot: ")," ",i.Plot),r.a.createElement(j.a,{className:"sub"}," ",r.a.createElement("span",{className:"spans"}," Genre: ")," ",i.Genre),r.a.createElement(j.a,{className:"sub"}," ",r.a.createElement("span",{className:"spans"}," Price: ")," ",i.price,"$"),r.a.createElement(j.a,{className:"sub"}," ",r.a.createElement("span",{className:"spans"}," Time: ")," ",new Date(i.playDate).toLocaleTimeString()," "),r.a.createElement(j.a,{className:"sub"}," ",r.a.createElement("span",{className:"spans"}," Date: ")," ",new Date(i.playDate).toLocaleDateString()," "),r.a.createElement(j.a,{className:"sub"}," ",r.a.createElement("span",{className:"spans"}," Runtime: ")," ",i.Runtime," "),r.a.createElement(j.a,{className:"sub"}," ",r.a.createElement("span",{className:"spans"}," Available Chairs: ")," ",i.availableChairs," "),r.a.createElement(p.b,{to:"/movieInfo/".concat(o)},r.a.createElement("button",{className:"mt-5 cardBtn text-white"},"Movie Info")),r.a.createElement(O.a,{style:{color:m?void 0==l._id?alert("Login"):"red":"white"},className:"mx-5 bg-transparent border-0",onClick:function(){return a(m?"delete":"add",i._id,l._id),void u(!m)}},r.a.createElement(I.a,{size:"2x",icon:U.b})))))))))},F={marginRight:"100px",marginTop:"34px"},A=function(e){return r.a.createElement("div",{style:F},r.a.createElement("iframe",{width:"580",height:"260",src:e.movie.movieTrailer,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}))},R=a(176),_=a(177),M=a(178),z={width:"1196px",margin:"30px 18px auto",padding:"10px 10px 0px 10px",color:"white"},B=function(e){function t(e){return Object(s.a)(this,t),Object(m.a)(this,Object(u.a)(t).call(this,e))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"endDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"day",a=new Date;return"day"==t?new Date(a.getFullYear(),a.getMonth(),a.getDate()+e).getDate():new Date(a.getFullYear(),a.getMonth(),a.getDate()+e).getMonth()+1}},{key:"componentDidMount",value:function(){this.props.pageShow(this.endDate(0))}},{key:"render",value:function(){var e=this;return r.a.createElement(R.a,{tabs:!0,style:z,className:"border"},r.a.createElement(_.a,{className:"tabItem mx-2"},r.a.createElement(M.a,{onClick:function(){e.props.pageShow(e.endDate(0))}},this.endDate(0)+" / "+this.endDate(0,"month"))),r.a.createElement(_.a,{className:"tabItem mx-2"},r.a.createElement(M.a,{onClick:function(){e.props.pageShow(e.endDate(1))}},this.endDate(1)+" / "+this.endDate(1,"month"))),r.a.createElement(_.a,{className:"tabItem mx-2"},r.a.createElement(M.a,{onClick:function(){e.props.pageShow(e.endDate(2))}},this.endDate(2)+" / "+this.endDate(2,"month"))),r.a.createElement(_.a,{className:"tabItem mx-2"},r.a.createElement(M.a,{onClick:function(){e.props.pageShow(e.endDate(3))}},this.endDate(3)+" / "+this.endDate(3,"month"))))}}]),t}(r.a.Component),P=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={moviesforDay:[]},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"check",value:function(e){var t=this,a=[];this.props.movies.map((function(t,n){new Date(t.playDate).getDate()===e&&a.push({movie:t,i:n})})),this.setState({moviesforDay:[].concat(a)},(function(){console.log(t.state.moviesforDay)}))}},{key:"render",value:function(){var e=this,t={},a=[];return this.state.moviesforDay.forEach((function(e,n){void 0==t[e.movie.Title]&&(t[e.movie.Title]=e,a.push(r.a.createElement(A,{key:e.i,movie:e.movie})))})),r.a.createElement("div",{style:{backgroundColor:"rgb(24, 24, 31)"}},r.a.createElement(N,null),r.a.createElement(E.a,null,r.a.createElement(b.a,{md:"8"},r.a.createElement(B,{pageShow:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(new Date).getDate();e.check(t)}}),this.state.moviesforDay.map((function(t){return r.a.createElement(T,{changeFavoriteState:function(t,a,n){return e.props.changeFavoriteState(t,a,n)},user:e.props.user,isFavorite:function(t){return e.props.isFavorite(t)},key:t.i,movie:t.movie,index:t.i,isUserLoggedIn:e.props.isUserLoggedIn})}))),r.a.createElement(b.a,{md:"4"},a)))}}]),t}(r.a.Component),W=a(179),q=a(180),Y=a(181),$=a(182),G=a(183),H=a(184),J=a(189),V=a(185),K={borderRadius:"0 1.6rem 1.6rem 0",width:"450px",backgroundColor:"rgb(24, 24, 31)",borderColor:"transparent",padding:"18px",marginRight:"110px"},Q={paddingRight:"45px",fontSize:"14pt",color:"white"},X={border:"2px solid #ca3e47",backgroundColor:"transparent",color:"#ca3e47",padding:"10px 14px",borderRadius:".4rem",marginRight:"22px"},Z={fontSize:"28pt",padding:"0 45px 0 25px",color:"#ca3e47"},ee={borderBottom:"2px solid #ca3e47",borderLeft:"0",borderRight:"0",borderTop:"0",color:"white"},te={color:"#ca3e47",fontWeight:"bold",marginRight:"-50px"},ae={paddingRight:"45px",color:"white"},ne=function(e){var t=Object(n.useState)(!1),a=Object(k.a)(t,2),l=a[0],i=a[1],o=Object(n.useState)(null),s=Object(k.a)(o,2),c=s[0],m=s[1];return r.a.createElement("div",{style:{backgroundColor:"rgb(24, 24, 31)"}},c?r.a.createElement(h.a,{to:c}):"",r.a.createElement(W.a,{expand:"md"},r.a.createElement(q.a,{tag:p.b,to:"/",className:"logo",style:Z},"Avatar"),r.a.createElement(Y.a,{onClick:function(){return i(!l)}}),r.a.createElement($.a,{isOpen:l,navbar:!0},r.a.createElement(R.a,{className:"mr-auto",navbar:!0},r.a.createElement(_.a,null,r.a.createElement(M.a,{className:"mt-1",tag:p.b,style:Q,to:"/"},"Home"))),r.a.createElement(G.a,null,r.a.createElement(H.a,{style:K},r.a.createElement(J.a,{addonType:"prepend"},r.a.createElement(O.a,{className:"bg-transparent border-0 ",onClick:function(){var t;t=document.getElementById("search").value,e.movies.map((function(e,a){e.Title.toLowerCase().includes(t.toLowerCase())&&(console.log(t),m("/movieInfo/"+a))}))}},r.a.createElement(I.a,{style:te,icon:U.d}))),r.a.createElement(V.a,{style:ee,className:"bg-transparent ",id:"search"}))),e.isUserLoggedIn?r.a.createElement(R.a,{className:"ml-auto",navbar:!0},r.a.createElement(_.a,{className:"ml-auto"},r.a.createElement(M.a,{tag:p.b,style:ae,to:"/user"},r.a.createElement(I.a,{className:"mt-2",size:"2x",icon:U.g}))),r.a.createElement(_.a,null,r.a.createElement(M.a,{onClick:function(){e.changeUserState(!1,{}),localStorage.setItem("x-auth-token","")},tag:p.b,style:X,className:"mt-2",to:"/"},r.a.createElement(I.a,{icon:U.e})))):r.a.createElement(R.a,{className:"ml-auto",navbar:!0},r.a.createElement(_.a,null,r.a.createElement(M.a,{className:"mt-1 mx-2",tag:p.b,to:"/signup"},r.a.createElement("button",{className:"signup"},"Signup"))),r.a.createElement(_.a,{className:"ml-auto"},r.a.createElement(M.a,{className:"mt-1 mr-4",tag:p.b,to:"/login"}," ",r.a.createElement("button",{className:"login"},"Login")))))))},re=function(e){var t=e.ticket;return r.a.createElement("div",{class:"popup-container"},r.a.createElement("input",{type:"checkbox",id:"login-popup"}),r.a.createElement("div",{class:"popup"},r.a.createElement("label",{for:"login-popup",class:"transparent-label"}),r.a.createElement("div",{class:"popup-content",style:{borderRadius:".6rem",fontSize:"16pt",color:"black",padding:"30px",backgroundColor:"white",margin:"auto",width:"750px",position:"relative",top:"320px",height:"360px",textAlign:"left"}},r.a.createElement("h3",{className:"text-center"}," ",r.a.createElement("span",{className:"logo-ticket"},"Avatar")," Cinema "),r.a.createElement("div",{className:" text-center present"}," ",r.a.createElement("span",{className:"present"},"Presents "),"... "),r.a.createElement("div",{className:"titles my-3"},"Movie Name : ",t.title),r.a.createElement("div",{className:"titles my-3"},"Time : ",t.playDate),r.a.createElement("div",{className:"titles my-3"},"Price : ",t.price),r.a.createElement("div",{className:"titles my-3"},"Customer : ",t.firstName+" "+t.lastName),r.a.createElement("div",{className:"titles my-3"},"Serial Number : ",t._id))))},le={width:"1610px",backgroundColor:"rgb(24, 24, 31)"},ie={height:"563px",backgroundColor:"rgb(24, 24, 31)",color:"white",marginTop:"140px"},oe={height:"562px",paddingRight:"20px",marginRight:"10px",width:"330px"},se={height:"563px",marginTop:"140px",backgroundColor:"rgb(24, 24, 31)",color:"white"},ce=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={movie:a.props.movies[e.match.params.index],ticket:{},favorite:!1,clicked:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"collect",value:function(){var e={firstName:this.props.user.firstName,lastName:this.props.user.lastName,userId:this.props.user._id,movieId:this.state.movie._id,playDate:this.state.movie.playDate,price:this.state.movie.price,title:this.state.movie.Title};this.handleReservation(e)}},{key:"handleReservation",value:function(e){var t=this;v.a.post("/api/user/reservation",e).then((function(e){e.data.status&&t.setState({ticket:e.data.reservation})}))}},{key:"handleFavorite",value:function(){if(void 0==this.props.user._id)return alert("you need to sign in to use this feature");this.props.changeFavoriteState(this.state.favorite?"delete":"add",this.state.movie._id,this.props.user._id),this.setState({favorite:!this.state.favorite})}},{key:"componentDidMount",value:function(){this.state.movie&&this.setState({favorite:this.props.isFavorite(this.state.movie._id)})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"m-auto",style:le},this.state.movie?r.a.createElement(E.a,null,r.a.createElement(b.a,{md:"7"},r.a.createElement(w.a,{style:ie},r.a.createElement(E.a,{className:"no-gutters"},r.a.createElement(b.a,{md:"4"},r.a.createElement(S.a,{style:oe,src:this.state.movie.Poster})),r.a.createElement(b.a,{md:"8"},r.a.createElement(C.a,null,r.a.createElement(D.a,{className:"title"},this.state.movie.Title," ",r.a.createElement("span",{className:"imdb"}," ... ",this.state.movie.imdbRating," ")),r.a.createElement(j.a,{className:"my-4"},r.a.createElement("span",{className:"spans"},"Plot: "),this.state.movie.Plot),r.a.createElement(j.a,{className:"my-4"}," ",r.a.createElement("span",{className:"spans"},"Price: "),this.state.movie.price,"$"),r.a.createElement(j.a,{className:"my-4"}," ",r.a.createElement("span",{className:"spans"},"Runtime: "),this.state.movie.Runtime," "),r.a.createElement(j.a,{className:"my-4"}," ",r.a.createElement("span",{className:"spans"},"available Chairs: "),this.state.movie.availableChairs,"/",this.state.movie.chairs," "),r.a.createElement(j.a,{className:"my-4"}," ",r.a.createElement("span",{className:"spans"},"Time: "),new Date(this.state.movie.playDate).toLocaleTimeString()," "),r.a.createElement(j.a,{className:"my-4"}," ",r.a.createElement("span",{className:"spans"},"Date: "),new Date(this.state.movie.playDate).toLocaleDateString()," "),r.a.createElement("label",{for:"login-popup",onClick:function(){e.collect(),e.setState({clicked:!0})},className:"mt-5 cardBtn text-white",disabled:!this.state.movie.availableChairs},"Reserve Now!"),r.a.createElement(O.a,{style:{color:this.state.favorite?this.props.isUserLoggedIn?"red":alert("Login Mothafucker"):"white"},className:"mx-4 mt-1 bg-transparent border-0",onClick:function(){return e.handleFavorite()}},r.a.createElement(I.a,{size:"2x",icon:U.b}))))))),r.a.createElement(b.a,{md:"5",className:"w-75 p-5 text-center",style:se},r.a.createElement("h2",{className:"py-4"},"Movie Trailer"),r.a.createElement(A,{movie:this.state.movie}))):r.a.createElement("div",null,"this Movie is not available"),this.state.clicked?void 0==this.props.user._id?alert("Login First Please"):r.a.createElement(re,{ticket:this.state.ticket}):"")}}]),t}(r.a.Component),me=a(187),ue=a(186),de=(a(132),a(165),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){var t={},n=document.getElementById("title"),r=document.getElementById("price"),l=document.getElementById("chairs"),i=document.getElementById("date"),o=document.getElementById("time");console.log(r.value.length,l.value.length,i.value.length),t.price=r.value.length>0?r.value:e.price,t.chairs=l.value.length>0?l.value:e.chairs,i.value.length<=0?i.value=new Date(e.playDate).toLocaleDateString():o.value.length<0&&(o.value=new Date(e.playDate).toLocaleTimeString()),console.log(i.value,o.value),t.playDate=new Date(i.value+" "+o.value),t.availability=!0,"add"==a.props.processType?(t.Title=n.value,t.availableChairs=l.value,a.props.handleAdd(t)):(t.availableChairs=e.availableChairs-(e.chairs-t.chairs),a.props.handleUpdate(e._id,t))},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t="update"==this.props.processType;return r.a.createElement("div",{className:"popup-container"},r.a.createElement("input",{type:"checkbox",id:"login-popup"}),r.a.createElement("div",{className:"popup"},r.a.createElement("label",{htmlFor:"login-popup",className:"transparent-label"}),r.a.createElement("div",{className:"popup-inner"},r.a.createElement("div",{className:"popup-title"},r.a.createElement("h6",null,t?"update Movie":"Add Movie"),r.a.createElement("label",{style:{backgroundColor:"transparent"},htmlFor:"login-popup",className:"popup-close-btn"},r.a.createElement(I.a,{color:"red",size:"2x",icon:U.h}))),r.a.createElement("div",{className:"popup-content"},r.a.createElement("form",{onSubmit:function(){return e.handleSubmit(e.props.movie)}},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(ue.a,null,"Movie Title: ",t?this.props.movie.Title:""),r.a.createElement(V.a,{disabled:t,id:"title",name:"Title"})),r.a.createElement("div",null,r.a.createElement(ue.a,null,"Price: "),r.a.createElement(V.a,{id:"price",name:"price",type:"number"})),r.a.createElement("div",null,r.a.createElement(ue.a,null,"Chairs: "),r.a.createElement(V.a,{id:"chairs",name:"chairs",type:"number"})),r.a.createElement("div",null,r.a.createElement(ue.a,null,"Date: "),r.a.createElement(V.a,{required:!0,max:"1-15-2020",min:"1-11-2020",id:"date",name:"date",type:"date"})),r.a.createElement("div",null,r.a.createElement(ue.a,null,"Time: "),r.a.createElement(V.a,{required:!0,id:"time",name:"time",type:"time"})),r.a.createElement("div",null,r.a.createElement(O.a,{style:{backgroundColor:"#ca3e47"},className:"mt-3"},t?"update Movie":"Add Movie"))))))))}}]),t}(n.Component)),pe={padding:"7px 9px",border:"2px solid #ca3e47",backgroundColor:"transparent",color:"#ca3e47",borderRadius:".4rem"},he={padding:"8px 10px",marginLeft:"22px",borderColor:"transparent",backgroundColor:"#ca3e47",color:"white",borderRadius:".4rem"},ge=function(e){return console.log(e.index),r.a.createElement("div",{className:"popup-container"},r.a.createElement("input",{type:"checkbox",id:"login-popup"}),r.a.createElement("div",{className:"popup"},r.a.createElement("label",{htmlFor:"login-popup",className:"transparent-label"}),r.a.createElement("div",{className:"popup-content",style:{borderRadius:".6rem",fontSize:"16pt",color:"black",padding:"40px",backgroundColor:"white",margin:"auto",width:"450px",position:"relative",top:"360px",height:"300px",textAlign:"center"}},r.a.createElement("div",{style:{marginTop:"60px"}},r.a.createElement(D.a,null,"Do you want to delete ",e.currentMovie," ? ")),r.a.createElement("div",null,r.a.createElement("div",{style:{display:"block-inline",margin:"auto",marginTop:"28px"}},r.a.createElement(O.a,{style:pe,onClick:function(){e.showDelete(!1)}},"Cancel"),r.a.createElement(O.a,{style:he,onClick:function(){e.handleDelete(e.id,e.index)},color:"secondary"},"Delete"))))))},ve={backgroundColor:"transparent",borderColor:"transparent",paddingRight:"8px",paddingLeft:"8px",textAlign:"center"},Ee={borderCollapse:"collapse",padding:"10px",backgroundColor:"#313131",width:"90%"},be=function(e){var t=e.movies,a=e.handleAdd,l=e.handleUpdate,i=e.handleDelete,o=Object(n.useState)(!1),s=Object(k.a)(o,2),c=s[0],m=s[1],u=Object(n.useState)(""),d=Object(k.a)(u,2),p=d[0],h=d[1],g=Object(n.useState)({}),v=Object(k.a)(g,2),E=v[0],b=v[1],f=Object(n.useState)(!1),y=Object(k.a)(f,2),x=y[0],N=y[1];return r.a.createElement("div",{className:"movieController"},r.a.createElement(me.a,{style:Ee,dark:!0,className:"text-center m-auto"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{fontSize:"14pt"}},"Movie Title"),r.a.createElement("th",{style:{fontSize:"14pt"}},"Time"),r.a.createElement("th",{style:{fontSize:"14pt"}},"Date"),r.a.createElement("th",{style:{fontSize:"14pt"}},"Price"),r.a.createElement("th",{style:{fontSize:"14pt"}},"Chairs"),r.a.createElement("th",{className:"text-center"},r.a.createElement("label",{htmlFor:"login-popup",style:{padding:"8px",borderColor:"transparent",backgroundColor:"#ca3e47",color:"white",borderRadius:"1rem"},onClick:function(){h("add"),m(!0),N(!1)},color:"light"}," ",r.a.createElement(I.a,{icon:U.c}),"  Add Movie")))),r.a.createElement("tbody",null,t?t.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("th",null,e.Title),r.a.createElement("td",null,new Date(e.playDate).toLocaleTimeString()," "),r.a.createElement("td",null,new Date(e.playDate).toLocaleDateString()),r.a.createElement("td",null,e.price,"$"),r.a.createElement("td",null,e.availableChairs," / ",e.chairs),r.a.createElement("td",{className:"text-center"},r.a.createElement("label",{htmlFor:"login-popup",onClick:function(){e.index=t,h("update"),m(!0),b(e),N(!1)},style:ve},r.a.createElement(I.a,{color:"white",icon:U.a})),r.a.createElement("label",{htmlFor:"login-popup",onClick:function(){e.index=t,h("delete"),m(!1),N(!0),b(e)},style:ve},r.a.createElement(I.a,{color:"red",icon:U.f}))))})):null)),c?r.a.createElement(de,{processType:p,movie:E,handleUpdate:function(e,t){return l(e,t)},handleAdd:function(e){return a(e)}}):"",x?r.a.createElement(ge,{currentMovie:E.Title,showDelete:N,handleDelete:function(e,t){return i(e,t)},index:E.index,id:E._id}):"")},fe={backgroundColor:"transparent",borderColor:"transparent"},ye={borderCollapse:"collapse",padding:"10px",backgroundColor:"#313131",width:"90%"},xe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={delete:!1,deleteUser:{}},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleDelete",value:function(e,t){var a=this;v.a.delete("api/user/".concat(e)).then((function(e){a.props.handleDelete(t)})).catch((function(e){console.log(e)}))}},{key:"showDelete",value:function(e){this.setState({delete:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(me.a,{style:ye,dark:!0,className:"text-center m-auto"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{fontSize:"14pt"}},"Username"),r.a.createElement("th",{style:{fontSize:"14pt"}},"First name"),r.a.createElement("th",{style:{fontSize:"14pt"}},"Last name"),r.a.createElement("th",{style:{fontSize:"14pt"}},"Email"))),r.a.createElement("tbody",null,this.props.users?this.props.users.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.userName),r.a.createElement("td",null,t.firstName),r.a.createElement("td",null,t.lastName),r.a.createElement("td",null,t.userEmail),r.a.createElement("td",null,r.a.createElement("label",{htmlFor:"login-popup",style:fe,onClick:function(){t.index=a,e.setState({delete:!0,deleteUser:t})}},r.a.createElement(I.a,{color:"red",icon:U.f}))))})):null)),console.log(this.state.delete),this.state.delete?r.a.createElement(ge,{currentMovie:this.state.deleteUser.firstName+" "+this.state.deleteUser.lastName,showDelete:function(t){return e.showDelete(t)},handleDelete:function(t,a){return e.handleDelete(t,a)},index:this.state.deleteUser.index,id:this.state.deleteUser._id}):null)}}]),t}(r.a.Component),Ne=a(38),ke=a(14),we={textAlign:"center",borderRadius:"1.2rem",padding:"10px",fontFamily:"Trebuchet MS",color:"white",fontSize:"14pt",marginTop:"90px"},Se={width:"30%",border:"2px solid #aaa",borderRadius:"4px",margin:"8px 0",outline:"none",padding:"8px",boxSizing:"border-box",transition:"0.3s"},Ce={backgroundColor:"#ca3e47",borderRadius:"8px",borderColor:"transparent",color:"white",textAlign:"center",textDecoration:"none",display:"inline-block",fontSize:"16px",margin:" 4px 2px",cursor:"pointer",padding:"8px 28px"},De=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={username:"",password:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"onChange",value:function(e){this.setState(Object(Ne.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),console.log(this.state),ke.post("/api/admin/login",this.state).then((function(e){if(e.data.status)return console.log(e.data),localStorage.setItem("admin-auth-token",e.data.token),t.props.changeAdminState(!0),t.props.bringUsersData(),r.a.createElement(h.a,{to:"/admin"})})).catch((function(e){e&&alert("write a valide data")}))}},{key:"render",value:function(){var e=this;return console.log(this.props.history),r.a.createElement("form",{onSubmit:this.handleSubmit.bind(this)},this.props.isAdminLoggedIn?r.a.createElement(h.a,{to:"/admin"}):r.a.createElement("div",{style:we},r.a.createElement("h2",{className:"mb-4"},"Welcome to Signin Page"),"username: ",r.a.createElement("br",null),r.a.createElement("input",{className:"my-3",style:Se,type:"text",name:"username",value:this.state.username,onChange:function(t){e.onChange(t)}}),r.a.createElement("br",null),"Password: ",r.a.createElement("br",null),r.a.createElement("input",{className:"my-3",style:Se,type:"password",name:"password",value:this.state.password,onChange:function(t){e.onChange(t)}}),r.a.createElement("br",null),r.a.createElement("input",{style:Ce,value:"Login",type:"submit"})))}}]),t}(n.Component),je={backgroundColor:"rgb(24, 24, 31)",width:"1850px",margin:"0 auto",padding:"100px"},Oe={width:"240px",padding:"6px",fontSize:"13pt",borderColor:"transparent",color:"white",backgroundColor:"#ca3e47"},Ie=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={users:[],movieShow:!0,isAdminLoggedIn:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"bringUsersData",value:function(){var e=this,t=localStorage.getItem("admin-auth-token");console.log(t),v.a.get("/api/admin",{headers:{Authorization:"Bearer "+t}}).then((function(t){console.log(t),e.setState({users:Object(o.a)(t.data.users),isAdminLoggedIn:!0})})).catch((function(t){console.log(t),e.props.history.replace("/admin/login")}))}},{key:"componentDidMount",value:function(){this.bringUsersData()}},{key:"changeAdminState",value:function(e){this.setState({isAdminLoggedIn:e})}},{key:"handleDelete",value:function(e){console.log(e),this.setState((function(t){return t.users.splice(e,1),{users:t.users}}))}},{key:"render",value:function(){var e=this;return r.a.createElement(p.a,null,r.a.createElement("div",null,r.a.createElement(h.d,null,r.a.createElement(h.b,{path:"".concat(this.props.match.path),exact:!0,component:function(){return r.a.createElement("div",null,console.log(e.state.isAdminLoggedIn),e.state.isAdminLoggedIn?r.a.createElement(w.a,{id:"card",style:je},r.a.createElement(E.a,null,r.a.createElement(b.a,{md:"2",className:"text-center"},r.a.createElement("div",{className:"m-auto w-100"},r.a.createElement("h2",{className:"pb-2 text-left",style:{color:"#ca3e47",borderBottom:"2px solid white"}},"Dashboard"),r.a.createElement(O.a,{style:Oe,onClick:function(){return e.setState({movieShow:!0})}},"Movies"),r.a.createElement(O.a,{style:Oe,className:"my-3",onClick:function(){e.setState({movieShow:!1})}},"Users"))),r.a.createElement(b.a,{md:"10"},r.a.createElement("div",null,e.state.movieShow?r.a.createElement(be,{movies:e.props.movies,handleUpdate:function(t,a){return e.props.handleUpdate(t,a)},handleAdd:function(t){return e.props.handleAdd(t)},handleDelete:function(t,a){return e.props.handleDelete(t,a)}}):r.a.createElement(xe,{handleDelete:function(t){return e.handleDelete(t)},users:e.state.users}))))):null)}}),r.a.createElement(h.b,{path:"".concat(this.props.match.path,"/login"),component:function(t){return r.a.createElement(De,{bringUsersData:function(){return e.bringUsersData()},isAdminLoggedIn:e.state.isAdminLoggedIn,changeAdminState:function(t){return e.changeAdminState(t)},history:t.history})}}))))}}]),t}(r.a.Component),Ue=a(188),Le=function(e){var t,a=e.movies;return a&&(t=a.map((function(e,t){return console.log(e),r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.Title),r.a.createElement("td",null,e.price),r.a.createElement("td",null,new Date(e.playDate).toLocaleDateString()),r.a.createElement("td",null,new Date(e.playDate).toLocaleTimeString()))}))),r.a.createElement("tbody",null,console.log(t),t)},Te={borderCollapse:"collapse",padding:"10px",backgroundColor:"#313131"},Fe={margin:"10px",fontSize:"14pt",textAlign:"left"},Ae=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={showPurched:!0},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{color:"white",backgroundColor:"rgb(24, 24, 31)",marginTop:"50px"}},console.log(this.props),this.props.isUserLoggedIn?"":r.a.createElement(h.a,{to:"/"}),r.a.createElement(Ue.a,{className:"mb-3"},r.a.createElement(E.a,null,r.a.createElement(b.a,{md:"4"},r.a.createElement(w.a,{style:{backgroundColor:"rgb(24, 24, 31)"}},r.a.createElement(S.a,{top:!0,width:"100%",src:"https://www.povertyalliance.org/wp-content/uploads/2019/03/Portrait_Placeholder.png",alt:"Card image cap"}),r.a.createElement(C.a,null,r.a.createElement(j.a,{className:"mt-2"},r.a.createElement("span",{style:Fe},"Name: ")," ",this.props.user.firstName+" "+this.props.user.lastName),r.a.createElement(j.a,{className:"mt-2"},r.a.createElement("span",{style:Fe},"Username: ")," ",this.props.user.userName),r.a.createElement(j.a,{className:"mt-2"},r.a.createElement("span",{style:Fe},"Email: ")," ",this.props.user.userEmail)))),r.a.createElement(b.a,{md:"8"},r.a.createElement(R.a,null,r.a.createElement(_.a,{className:"tabItem"},r.a.createElement(M.a,{activeClassName:"tabItem",onClick:function(){return e.setState({showPurched:!0})}},"Purchased moives")),r.a.createElement(_.a,{className:"tabItem"},r.a.createElement(M.a,{onClick:function(){return e.setState({showPurched:!1})}},"Favorite moives"))),r.a.createElement(me.a,{style:Te,dark:!0,className:"w-100 text-center m-auto"},r.a.createElement("tr",null,r.a.createElement("th",null,"Movie Name"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Time")),this.state.showPurched?r.a.createElement(Le,{movies:this.props.user.moviesBought}):r.a.createElement(Le,{movies:this.props.user.favoriteMovies}))))))}}]),t}(r.a.Component),Re=a(190),_e=a(14),Me={textAlign:"center",borderRadius:"1.2rem",padding:"10px",fontFamily:"Trebuchet MS",color:"white",fontSize:"14pt",marginTop:"90px"},ze={width:"30%",border:"2px solid #aaa",borderRadius:"4px",margin:"8px 0",outline:"none",padding:"8px",boxSizing:"border-box",transition:"0.3s"},Be={backgroundColor:"#ca3e47",borderRadius:"8px",borderColor:"transparent",color:"white",textAlign:"center",textDecoration:"none",display:"inline-block",fontSize:"16px",margin:" 4px 2px",cursor:"pointer",padding:"8px 28px"},Pe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={userName:"",password:"",firstName:"",lastName:"",userEmail:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"onChange",value:function(e){this.setState(Object(Ne.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),!this.state.userName||!this.state.password||!this.state.userEmail)return document.getElementById("alert").style.visibility="visible",void(document.getElementById("alert").textContent="Fill The Fields");_e.post("/signup",this.state).then((function(e){if(e.data.status)return localStorage.setItem("x-auth-token",e.data.token),document.getElementById("alert").style.visibility="hidden",document.getElementById("alert").textContent="",console.log(e),void t.props.changeUserState(!0,e.data.user);if(!e.data.status){if(e.data.data.error.message.includes("Fill the Fields"))return document.getElementById("alert").style.visibility="visible",void(document.getElementById("alert").textContent="Fill The Fields");if(e.data.data.error.message.includes("username"))return document.getElementById("alert").style.visibility="visible",void(document.getElementById("alert").textContent="Username is Duplicated");if(e.data.data.error.message.includes("email"))return document.getElementById("alert").style.visibility="visible",void(document.getElementById("alert").textContent="Email is Duplicated")}})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return this.props.isUserLoggedIn?r.a.createElement(h.a,null):r.a.createElement("div",{style:Me},r.a.createElement("form",{onSubmit:this.handleSubmit.bind(this)},r.a.createElement("h2",{className:"mb-4"},"Welcome to Signup Page"),"Username ",r.a.createElement("br",null),r.a.createElement("input",{className:"my-3",style:ze,type:"text",name:"userName",value:this.state.userName,onChange:function(t){e.onChange(t)}}),r.a.createElement("br",null),"Password ",r.a.createElement("br",null),r.a.createElement("input",{className:"my-3",style:ze,type:"password",name:"password",value:this.state.password,onChange:function(t){e.onChange(t)}}),r.a.createElement("br",null),"First Name ",r.a.createElement("br",null),r.a.createElement("input",{className:"my-3",style:ze,type:"text",name:"firstName",value:this.state.firstName,onChange:function(t){e.onChange(t)}}),r.a.createElement("br",null),"Last Name ",r.a.createElement("br",null),r.a.createElement("input",{className:"my-3",style:ze,type:"text",name:"lastName",value:this.state.lastName,onChange:function(t){e.onChange(t)}}),r.a.createElement("br",null),"Email ",r.a.createElement("br",null),r.a.createElement("input",{className:"my-3",style:ze,type:"text",name:"userEmail",value:this.state.userEmail,onChange:function(t){e.onChange(t)}}),r.a.createElement("br",null),r.a.createElement("input",{className:"mt-3",style:Be,type:"submit",value:"Signup"}),r.a.createElement(Re.a,{style:{visibility:"hidden",padding:"8px",width:"500px",margin:"auto",marginTop:"12px"},color:"danger",id:"alert"})))}}]),t}(n.Component),We=a(14),qe={textAlign:"center",borderRadius:"1.2rem",padding:"10px",fontFamily:"Trebuchet MS",color:"white",fontSize:"14pt",marginTop:"90px"},Ye={width:"30%",border:"2px solid #aaa",borderRadius:"4px",margin:"8px 0",outline:"none",padding:"8px",boxSizing:"border-box",transition:"0.3s"},$e={backgroundColor:"#ca3e47",borderRadius:"8px",borderColor:"transparent",color:"white",textAlign:"center",textDecoration:"none",display:"inline-block",fontSize:"16px",margin:" 4px 2px",cursor:"pointer",padding:"8px 28px"},Ge={visibility:"hidden",padding:"10px",width:"400px",margin:"12px auto"},He=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={userName:"",password:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"onChange",value:function(e){this.setState(Object(Ne.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();localStorage.getItem("x-auth-token");We.post("/login",this.state).then((function(e){if(e.data.status)e.data.status&&(window.localStorage.setItem("x-auth-token",e.data.token),localStorage.setItem("x-auth-token",e.data.token),t.props.changeUserState(!0,e.data.user),t.props.history.replace("/"));else{if(e.data.error.includes("MUST PROVIDE"))return document.getElementById("alert").style.visibility="visible",void(document.getElementById("alert").textContent="Fill the Fields");if(e.data.error.includes("Incorrect Password"))return document.getElementById("alert").style.visibility="visible",void(document.getElementById("alert").textContent="Your Data is incorrect")}})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:this.handleSubmit.bind(this)},r.a.createElement("div",{style:qe},r.a.createElement("h2",{className:"mb-4"},"Welcome to Login Page"),"Username ",r.a.createElement("br",null),r.a.createElement("input",{className:"my-3",style:Ye,type:"text",name:"userName",value:this.state.userName,onChange:function(t){e.onChange(t)}}),r.a.createElement("br",null),"Password ",r.a.createElement("br",null),r.a.createElement("input",{className:"my-3",style:Ye,type:"password",name:"password",value:this.state.password,onChange:function(t){e.onChange(t)}}),r.a.createElement("br",null),r.a.createElement("input",{style:$e,type:"submit",value:"Login"}),r.a.createElement(Re.a,{style:Ge,color:"danger",id:"alert"})))}}]),t}(n.Component),Je=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={movies:[],currentReservation:{},isUserLoggedIn:!1,user:{}},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"getMovies",value:function(){var e=this;v.a.get("/API/movies").then((function(t){e.setState({movies:[].concat(Object(o.a)(e.state.movies),Object(o.a)(t.data))})})).catch((function(e){}))}},{key:"handleAdd",value:function(e){var t=this;localStorage.getItem("admin-auth-token");v.a.post("/api/movies",e).then((function(e){t.setState((function(t){return t.movies.push(e.data[0]),{movies:Object(o.a)(t.movies)}}),(function(){}))}))}},{key:"handleUpdate",value:function(e,t){var a=this,n=localStorage.getItem("admin-auth-token");console.log(t),v.a.patch("/api/movies/".concat(e),t,{headers:{Authorization:"Bearer "+n}}).then((function(t){a.setState((function(a){var n=a.movies.map((function(a,n){return a._id==e?t.data:a}));return{movies:Object(o.a)(n)}}))}))}},{key:"handleDelete",value:function(e,t){var a=this,n=localStorage.getItem("admin-auth-token");v.a.delete("/api/movies/".concat(e),{headers:{Authorization:"Bearer "+n}}).then((function(e){a.setState((function(e){return e.movies.splice(t,1),{movies:Object(o.a)(e.movies)}}))}))}},{key:"changeUserState",value:function(e,t){this.setState({isUserLoggedIn:e,user:t})}},{key:"isFavorite",value:function(e){if(void 0!=this.state.user){var t=this.state.user.favoriteMovies;if(void 0!=t)for(var a=0;a<t.length;a++)if(t[a]._id===e)return!0;return!1}}},{key:"changeFavoriteState",value:function(e,t,a){var n=this;"add"==e?v.a.post("/api/user/favorite",{movieId:t,userId:a}).then((function(e){n.getUser()})).catch((function(e){})):"delete"==e&&v.a.delete("/api/user/favorite/".concat(a,"/").concat(t)).then((function(e){})).catch((function(e){}))}},{key:"getUser",value:function(){var e=this,t=localStorage.getItem("x-auth-token");v.a.get("/api/user/",{headers:{Authorization:"Bearer "+t}}).then((function(t){t.data.status&&e.setState({user:t.data.user,isUserLoggedIn:!0})})).catch((function(e){}))}},{key:"componentDidMount",value:function(){this.getUser(),this.getMovies()}},{key:"render",value:function(){var e=this;return r.a.createElement(p.a,null,r.a.createElement(ne,{changeUserState:function(t,a){return e.changeUserState(t,a)},isUserLoggedIn:this.state.isUserLoggedIn,movies:this.state.movies,handleSearch:function(t){return function(t){return e.handleSearch(t)}(t)}}),r.a.createElement(h.d,null,r.a.createElement(h.b,{path:"/",exact:!0,component:function(t){return r.a.createElement(P,{user:e.state.user,changeFavoriteState:function(t,a,n){return e.changeFavoriteState(t,a,n)},isFavorite:function(t){return e.isFavorite(t)},isUserLoggedIn:e.state.isUserLoggedIn,movies:e.state.movies})}}),r.a.createElement(h.b,{path:"/movieInfo/:index",component:function(t){return r.a.createElement(ce,{changeFavoriteState:function(t,a,n){return e.changeFavoriteState(t,a,n)},isFavorite:function(t){return e.isFavorite(t)},match:t.match,isUserLoggedIn:e.state.isUserLoggedIn,user:e.state.user,movies:e.state.movies})}}),r.a.createElement(h.b,{path:"/admin",component:function(t){return r.a.createElement(Ie,{history:t.history,match:t.match,movies:e.state.movies,handleUpdate:function(t,a){return e.handleUpdate(t,a)},handleAdd:function(t){return e.handleAdd(t)},handleDelete:function(t,a){return e.handleDelete(t,a)}})}}),r.a.createElement(h.b,{path:"/user",exact:!0,component:function(){return r.a.createElement(Ae,{isUserLoggedIn:e.state.isUserLoggedIn,user:e.state.user})}}),r.a.createElement(h.b,{path:"/signup",exact:!0,component:function(){return r.a.createElement(Pe,{changeUserState:function(t,a){return e.changeUserState(t,a)},isUserLoggedIn:e.state.isUserLoggedIn})}}),r.a.createElement(h.b,{path:"/login",exact:!0,component:function(t){return console.log(t),r.a.createElement(He,{history:t.history,changeUserState:function(t,a){return e.changeUserState(t,a)},isUserLoggedIn:e.state.isUserLoggedIn})}})))}}]),t}(r.a.Component);a(166);i.a.render(r.a.createElement(Je,null),document.getElementById("root"))},39:function(e,t,a){},44:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=44},93:function(e,t,a){e.exports=a(167)}},[[93,1,2]]]);
//# sourceMappingURL=main.310d4d9c.chunk.js.map